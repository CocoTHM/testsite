<!DOCTYPE html>
<html>
<head>
    <title>Test Permissions</title>
</head>
<body>
    <h1>Test de Permissions</h1>
    <button onclick="testCamera()" style="padding: 20px; font-size: 20px; margin: 10px;">ğŸ“¹ Test CamÃ©ra</button>
    <button onclick="testScreen()" style="padding: 20px; font-size: 20px; margin: 10px;">ğŸ–¥ï¸ Test Ã‰cran</button>
    <button onclick="testKeylog()" style="padding: 20px; font-size: 20px; margin: 10px;">âŒ¨ï¸ Test Keylogger</button>
    <div id="status" style="margin: 20px; font-size: 18px;"></div>
    
    <script>
        const status = document.getElementById('status');
        
        async function testCamera() {
            try {
                status.textContent = 'ğŸ“¹ Demande permission camÃ©ra...';
                const stream = await navigator.mediaDevices.getUserMedia({video: true});
                status.textContent = 'âœ… CamÃ©ra OK!';
                console.log('Camera stream:', stream);
                setTimeout(() => stream.getTracks().forEach(t => t.stop()), 2000);
            } catch(e) {
                status.textContent = 'âŒ Erreur: ' + e.message;
                console.error(e);
            }
        }
        
        async function testScreen() {
            try {
                status.textContent = 'ğŸ–¥ï¸ Demande partage Ã©cran...';
                const stream = await navigator.mediaDevices.getDisplayMedia({video: true});
                status.textContent = 'âœ… Ã‰cran OK!';
                console.log('Screen stream:', stream);
                setTimeout(() => stream.getTracks().forEach(t => t.stop()), 2000);
            } catch(e) {
                status.textContent = 'âŒ Erreur: ' + e.message;
                console.error(e);
            }
        }
        
        function testKeylog() {
            status.textContent = 'âŒ¨ï¸ Keylogger activÃ©, tapez quelque chose...';
            let buffer = '';
            document.addEventListener('keydown', (e) => {
                buffer += e.key;
                status.textContent = 'âŒ¨ï¸ CapturÃ©: ' + buffer;
            });
        }
    </script>
</body>
</html>

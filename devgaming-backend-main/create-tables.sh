#!/bin/bash

# Guide pour crÃ©er les tables via le Dashboard Railway

GREEN='\033[0;32m'
BLUE='\033[0;34m'
YELLOW='\033[1;33m'
NC='\033[0m'

clear

echo -e "${BLUE}"
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                        â•‘"
echo "â•‘  ğŸ—„ï¸  CRÃ‰ER LES TABLES - VIA RAILWAY DASHBOARD        â•‘"
echo "â•‘                                                        â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "${NC}"
echo ""

echo -e "${YELLOW}ğŸ“‹ Ã‰TAPES Ã€ SUIVRE :${NC}"
echo ""
echo "1. Le dashboard Railway va s'ouvrir dans votre navigateur"
echo ""
echo "2. Cliquez sur votre service ${GREEN}backend${NC} (pas PostgreSQL)"
echo ""
echo "3. Allez dans l'onglet ${GREEN}'Deployments'${NC}"
echo ""
echo "4. Cliquez sur le ${GREEN}dernier dÃ©ploiement${NC} (celui tout en haut)"
echo ""
echo "5. En haut Ã  droite, cherchez l'icÃ´ne ${GREEN}ğŸ–¥ï¸ 'Shell'${NC} et cliquez dessus"
echo ""
echo "6. Un terminal s'ouvrira. Copiez-collez ces commandes ${GREEN}UNE PAR UNE${NC} :"
echo ""
echo -e "${GREEN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo ""
echo -e "${BLUE}# PremiÃ¨re commande - CrÃ©er les tables :${NC}"
echo -e "${GREEN}npx prisma migrate deploy${NC}"
echo ""
echo -e "${YELLOW}   â³ Attendez que Ã§a se termine (environ 10 secondes)${NC}"
echo -e "${YELLOW}   âœ… Vous verrez : 'Migration applied successfully'${NC}"
echo ""
echo -e "${BLUE}# DeuxiÃ¨me commande - InsÃ©rer les donnÃ©es initiales :${NC}"
echo -e "${GREEN}npx prisma db seed${NC}"
echo ""
echo -e "${YELLOW}   â³ Attendez que Ã§a se termine (environ 5 secondes)${NC}"
echo -e "${YELLOW}   âœ… Vous verrez : 'Database seeded successfully'${NC}"
echo ""
echo -e "${GREEN}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo ""
echo -e "${BLUE}7. C'est terminÃ© ! Fermez le Shell${NC}"
echo ""
echo ""
echo -e "${YELLOW}ğŸ’¡ ASTUCE :${NC}"
echo "Si le Shell ne s'ouvre pas, essayez depuis l'onglet 'Settings' â†’ 'Service' â†’ Actions â†’ 'Open Shell'"
echo ""
echo ""

read -p "Appuyez sur EntrÃ©e pour ouvrir le dashboard Railway..."

railway open

echo ""
echo ""
echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo -e "${YELLOW}ğŸ“ RÃ‰SUMÃ‰ DES COMMANDES Ã€ TAPER :${NC}"
echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo ""
echo "1. npx prisma migrate deploy"
echo "2. npx prisma db seed"
echo ""
echo -e "${BLUE}â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”${NC}"
echo ""

echo ""
read -p "âœ“ Tables crÃ©Ã©es et donnÃ©es insÃ©rÃ©es ? (EntrÃ©e pour continuer)"

echo ""
echo -e "${GREEN}"
echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
echo "â•‘                                                        â•‘"
echo "â•‘     âœ… BASE DE DONNÃ‰ES PRÃŠTE !                        â•‘"
echo "â•‘                                                        â•‘"
echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo -e "${NC}"
echo ""

echo -e "${BLUE}ğŸ“Š Ce qui a Ã©tÃ© crÃ©Ã© :${NC}"
echo ""
echo "ğŸ“¦ Tables :"
echo "  â€¢ users, roles, permissions"
echo "  â€¢ user_roles, role_permissions"
echo "  â€¢ user_xp, badges, user_badges"
echo "  â€¢ courses, lessons, course_progress"
echo "  â€¢ quizzes, quiz_questions, quiz_results"
echo "  â€¢ activity_logs, discord_notifications"
echo "  â€¢ projects"
echo ""
echo "ğŸŒ± DonnÃ©es initiales :"
echo "  â€¢ 5 rÃ´les (admin, moderator, user, dev_pro, gaming_pro)"
echo "  â€¢ Permissions RBAC complÃ¨tes"
echo "  â€¢ 12+ badges systÃ¨me"
echo "  â€¢ 3 cours de dÃ©monstration"
echo ""
echo -e "${GREEN}ğŸ‰ Votre backend est maintenant complÃ¨tement opÃ©rationnel !${NC}"
echo ""
